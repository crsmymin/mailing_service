<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mail">
	<select id="getSendList" parameterType="String" resultType="SendListVO">
               <![CDATA[
                       SELECT send_list_id,
						    send_subject,
						    contents_id,
						    send_datetime,
						    req_date,
						    send_status,
                            (select count(*) from mail_send_result As r where r.send_list_id=l.send_list_id ) as send_cnt,
                            (select count(*) from mail_send_result As r where r.send_list_id=l.send_list_id and send_result_yn='y') as send_succ_cnt,
                            (select count(*) from mail_send_result As r where r.send_list_id=l.send_list_id and send_result_yn='n' ) as send_fail_cnt,
                            (select count(*) from mail_send_result As r where r.send_list_id=l.send_list_id and send_mail_check_yn='y' ) as mail_check,
                            (select count(*) from mail_send_result As r where r.send_list_id=l.send_list_id and send_mail_check_date is not null) as mail_reject
						FROM reverse_mail.mail_send_list l
               ]]>
     </select>
     <select id="getSendResultList" parameterType="String" resultType="SendResultVO">
               <![CDATA[
                       SELECT send_result_id,
						    send_list_id,
						    send_mail,
						    send_date,
						    send_result_yn,
						    send_mail_check_yn,
						    send_mail_check_date,
						    reject_date
						FROM reverse_mail.mail_send_result
               ]]>
     </select>
</mapper>
