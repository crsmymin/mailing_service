<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">
	<select id="getGroupList" parameterType="String" resultType="GroupVO">
               <![CDATA[
                       SELECT group_id,
						    group_name,
						    req_date,
						    delet_date,
						    (select count(*) from mail_member as m where g.group_id = m.group_id) AS member_cnt
						FROM reverse_mail.mail_group g
               ]]>
     </select>
     <select id="getMemberList" parameterType="String" resultType="MemberVO">
           SELECT member_id,
		    group_id,
		    (select group_name from mail_group as g where g.group_id = m.group_id) AS group_name,
		    member_name,
		    member_mail,
		    req_date,
		    delete_date,
		    rejection_date
		FROM reverse_mail.mail_member m
		WHERE 1=1
		<if test='value != null'>
			AND (member_name like CONCAT('%',#{0},'%') OR member_mail like CONCAT('%',#{0},'%'))
		</if>
     </select>
</mapper>
